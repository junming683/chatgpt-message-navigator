const e=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){let t=Array.from(document.querySelectorAll(`article`)).indexOf(e.target);document.querySelectorAll(`.nav-btn`).forEach(e=>e.classList.remove(`active-nav`));let n=document.querySelectorAll(`.nav-btn`)[t];n&&n.classList.add(`active-nav`)}})},{threshold:.1,rootMargin:`-20% 0px -20% 0px`}),t=e=>{let t=e.textContent.replace(/\s+/g,` `).trim().substring(0,150),n=e.getAttribute(`data-turn-id`)||``,r=document.createElement(`button`);r.className=`nav-btn`,r.style.setProperty(`--msg-preview`,`"${t}"`),r.setAttribute(`data-turn-id`,n);let i=document.createElement(`div`);return i.id=`msg-line`,i.style.width=e.dataset.turn===`user`?`40%`:`70%`,r.appendChild(i),r.onclick=()=>{e.scrollIntoView({behavior:`smooth`,block:`start`})},r},n=(e,t)=>{if(e.length!==t.length)return!0;for(let n=0;n<e.length;n++)if(e[n].getAttribute(`data-turn-id`)!==t[n].getAttribute(`data-turn-id`))return!0;return!1};function r(){let r=document.querySelector(`div[role="presentation"]`);if(!r)return;let i=r.firstElementChild,a=r.querySelectorAll(`article`);if(!i||a.length===0)return;let o=i.querySelector(`#navigate-btn-container`);o||(o=document.createElement(`div`),o.id=`navigate-btn-container`,i.append(o)),n(o.querySelectorAll(`button`),a)&&(o.innerHTML=``,a.forEach(n=>{e.observe(n);let r=t(n);o.appendChild(r)}))}r(),new MutationObserver(()=>{r()}).observe(document.querySelector(`main`),{childList:!0,subtree:!0});